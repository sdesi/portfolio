---
import "../styles/variables.css";
import "../styles/reset.css";
import "../styles/global.css";
import Logo from "../assets/logo.svg";

type LayoutProps = {
  title?: string;
  hideScrollbar?: boolean;
};

const { title = "Портфолио", hideScrollbar = false } =
  Astro.props as LayoutProps;

// текущий путь
const path = Astro.url.pathname;

// мы на странице проекта?
const isProjectPage = path.startsWith("/projects/");

// активность кнопок
const isPortfolioActive = path === "/" || path.startsWith("/projects/");
const isWhoActive = path.startsWith("/about");

// base для GitHub Pages
const base = import.meta.env.BASE_URL;
---

<html lang="ru" class={hideScrollbar ? "no-scrollbar" : ""}>
  <head>
    <meta charset="utf-8" />
    <title>{title}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Дополнительный линк, если хочешь, чтобы CSS был явно подключен как файл -->
    <link rel="stylesheet" href={`${base}styles/global.css`} />
  </head>

  <body>
    <header class="header">
      <!-- Навигация — всегда видна -->
      <nav class="nav">
        <a
          href={base}
          class={`nav-link nav-portfolio ${
            isPortfolioActive ? "active" : ""
          }`}
        >
          Портфолио
        </a>

        <a
          href={`${base}about/`}
          class={`nav-link nav-who ${isWhoActive ? "active" : ""}`}
        >
          Кто я?
        </a>
      </nav>

      <!-- Если НЕ страница проекта → показываем логотип + текст + часы -->
      { !isProjectPage && (
        <>
          <a href={base} class="logo-link">
            <Logo class="logo" />
          </a>

          <div class="header-text">
            <div>
              <p>
                <strong>ЗАО „ВыксаЖилСтройСервис“</strong><br />
                г. о. г. Выкса, с. Мотмос,<br />
                ул. Мироновка 36<br /><br />
                <div>
                  <a class="header-tg-icon" href="tg.me">TG</a>
                  <a href="tel:+79994244242">+7 999 424-42-42</a>
                </div>
              </p>
            </div>

            <section class="pixel-clock">
              <div class="clock-grid">
                <span class="clock-cell cell-11">11</span>
                <span class="clock-cell cell-12">12</span>
                <span class="clock-cell cell-1">1</span>

                <span class="clock-cell cell-10">10</span>
                <span class="clock-cell cell-2">2</span>

                <span class="clock-cell cell-9">9</span>
                <span class="clock-cell cell-3">3</span>

                <span class="clock-cell cell-8">8</span>
                <span class="clock-cell cell-4">4</span>

                <span class="clock-cell cell-7">7</span>
                <span class="clock-cell cell-6">6</span>
                <span class="clock-cell cell-5">5</span>

                <div class="clock-center">
                  <div class="clock-hand clock-hand-hour"></div>
                  <div class="clock-hand clock-hand-minute"></div>
                  <div class="clock-hand clock-hand-second"></div>
                  <div class="clock-center-dot"></div>
                </div>
              </div>
            </section>

            <script src={`${base}js/pixel-clock.js`} defer></script>
          </div>
        </>
      )}
    </header>

    <main>
      <slot />
    </main>
  </body>
</html>
