---
// src/components/ProjectBoard.astro

import type { BoardBlock, BoardView } from "../types/Board";

interface Props {
  blocks: BoardBlock[];
  initialView: BoardView;
}

const { blocks, initialView } = Astro.props as Props;
---

<div class="project-board">
  <div
    id="board-inner"
    class="project-board-inner"
    data-camera-x={initialView.x}
    data-camera-y={initialView.y}
    style={`transform: translate(${initialView.x}px, ${initialView.y}px);`}
  >
    {blocks.map((block: BoardBlock) =>
      block.type === "image" ? (
        <img
          class="board-block board-image"
          src={block.src!}
          alt={block.id}
          style={`left:${block.x}px; top:${block.y}px; width:${block.width}px;`}
        />
      ) : (
        <div
          class="board-block board-text"
          style={`left:${block.x}px; top:${block.y}px; width:${block.width}px;`}
        >
          {block.content}
        </div>
      )
    )}
  </div>

  <script src="/js/board-controls.js" defer></script>
</div>
